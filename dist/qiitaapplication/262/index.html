<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>wp-app</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="## Build Setup"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/runtime.8b17cd4.js" as="script"><link rel="preload" href="/_nuxt/vendors/commons.ca01d4b.js" as="script"><link rel="preload" href="/_nuxt/app.1984cc1.js" as="script"><link rel="preload" href="/_nuxt/pages/_slug/_id.b892f06.js" as="script"><style data-vue-ssr-id="fa7ff0ca:0 56b15182:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}</style><link rel="preload" href="/_nuxt/static/1598415284/qiitaapplication/262/payload.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div><div class="post"><h1>記事ページを表示する</h1> <div class="content">
<p>記事一覧から記事を押下した場合、WebViewを使用して該当URLのページを表示する</p>



<figure class="wp-block-gallery columns-1 is-cropped"><ul class="blocks-gallery-grid"><li class="blocks-gallery-item"><figure><img src="http://localhost:8888/myblog/wp-content/uploads/2020/08/screenshot-2020-08-15-12.44.07-1.png" alt="" data-id="463" data-full-url="http://localhost:8888/myblog/wp-content/uploads/2020/08/screenshot-2020-08-15-12.44.07-1.png" data-link="https://www.komugirice.com/screenshot-2020-08-15-12-44-07/" class="wp-image-463"></figure></li></ul></figure>



<p class="filename">activity_web_view.xml</p>



<pre class="EnlighterJSRAW" data-enlighter-language="xml" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="false" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;layout>
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    &lt;androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="@color/colorQiita"
        android:elevation="0dp"
        android:stateListAnimator="@null"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

       ・・・

    &lt;/androidx.appcompat.widget.Toolbar>

    &lt;WebView
        android:id="@+id/webView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/toolbar">

    &lt;/WebView>

&lt;/androidx.constraintlayout.widget.ConstraintLayout>
&lt;/layout></pre>



<p class="filename">WebViewActivity.kt</p>



<p>start()でbundleにURLが入ってくるので、myWebView.loadUrl()へ渡すと描画される</p>



<pre class="EnlighterJSRAW" data-enlighter-language="kotlin" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">class WebViewActivity : AppCompatActivity() {

・・・

    /** 記事URL */
    private val mUrl by lazy { intent.getStringExtra(KEY_URL) }
    /** 記事タイトル */
    private val mTitle by lazy { intent.getStringExtra(KEY_TITLE) }
    /** 記事ID */
    private val mQiitaResponseID by lazy { intent.getStringExtra(KEY_ID) }

・・・

    private fun initWebView() {
        val myWebView = findViewById&lt;WebView>(R.id.webView)
        myWebView.webViewClient = WebViewClient()
        myWebView.loadUrl(mUrl)
    }

・・・

    companion object {

        public const val KEY_ID = "key_id"
        public const val KEY_URL = "key_url"
        public const val KEY_TITLE = "key_title"
        public const val KEY_PROFILE_IMAGE_URL = "key_profileImageUrl"
        public const val KEY_USER_NAME = "key_userName"
        public const val KEY_CREATED_AT = "key_createdAt"
        public const val KEY_LIKES_COUNT = "key_likesCount"
        public const val KEY_COMMENT_COUNT = "key_commentCount"
        public const val KEY_TAGS = "key_tags"

        fun start(context: Context?, bundle: Bundle) = context?.startActivity(
                Intent(context, WebViewActivity::class.java)
                    .putExtras(bundle)

            )
    }
}

</pre>



<h4>WebViewActivityの呼び出し元</h4>



<p class="filename">ArticleAdapter.kt</p>



<pre class="EnlighterJSRAW" data-enlighter-language="kotlin" data-enlighter-theme="" data-enlighter-highlight="60,61,63,74" data-enlighter-linenumbers="" data-enlighter-lineoffset="54" data-enlighter-title="" data-enlighter-group="">            holder.binding.root.setOnClickListener(object : View.OnClickListener {
            //view.setOnClickListener(object : View.OnClickListener {
                override fun onClick(view: View) {

                    val position = holder.adapterPosition // positionを取得
                    // クリック時の処理
                    val bundle = Bundle()
                    bundle.apply {
                        putString(WebViewActivity.KEY_ID, items[position].row.id)
                        putString(WebViewActivity.KEY_URL, items[position].row.url)
                        putString(WebViewActivity.KEY_TITLE, items[position].row.title)
                        putString(WebViewActivity.KEY_PROFILE_IMAGE_URL, items[position].row.profileImageUrl)
                        putString(WebViewActivity.KEY_USER_NAME, items[position].row.userName)
                        putString(WebViewActivity.KEY_CREATED_AT, items[position].row.createdAt)
                        putString(WebViewActivity.KEY_LIKES_COUNT, items[position].row.likesCount)
                        putString(WebViewActivity.KEY_COMMENT_COUNT, items[position].row.commentCount)
                        putString(WebViewActivity.KEY_TAGS, items[position].row.tags)

                    }

                    WebViewActivity.start(context, bundle)
                }
            })</pre>
</div></div></div></div></div></div><script>window.__NUXT__={staticAssetsBase:"/_nuxt/static/1598415284",layout:"default",error:null,serverRendered:!0,routePath:"/qiitaapplication/262/",config:{}}</script><script src="/_nuxt/runtime.8b17cd4.js" defer></script><script src="/_nuxt/pages/_slug/_id.b892f06.js" defer></script><script src="/_nuxt/vendors/commons.ca01d4b.js" defer></script><script src="/_nuxt/app.1984cc1.js" defer></script>
  </body>
</html>
